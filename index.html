<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Produção</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f7f9;
            color: #333;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 800px;
            margin: auto;
        }
        .input-group, .controls, .pause-section, .progress-bar, .table-container {
            width: 100%;
            margin-bottom: 20px;
            background-color: #e3e9ee;
            padding: 15px;
            border-radius: 10px;
        }
        .input-group input {
            margin: 5px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .progress-bar {
            height: 30px;
            background-color: #d3d3d3;
            border-radius: 5px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background-color: green;
        }
        .residual {
            background-color: red;
        }
        .table-container table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Tela 1: Cadastro -->
        <div class="input-group" id="cadastro">
            <h2>Cadastro de OP</h2>
            <input type="text" id="op" placeholder="OP" />
            <input type="number" id="metragemOp" placeholder="Metragem da OP" />
            <input type="number" id="er" placeholder="ER" />
            <input type="number" id="eficiencia" placeholder="Eficiência (%)" />
            <button onclick="iniciarProcesso()">Iniciar</button>
        </div>

        <!-- Tela 2: Monitoramento -->
        <div class="controls" id="monitoramento" style="display: none;">
            <h2>Monitoramento da Produção</h2>
            <div>Tempo da OP: <span id="tempoOp">00:00</span></div>
            <div class="input-group">
                <input type="number" id="metragemBobina1" placeholder="Metragem Bobina 1" />
                <button onclick="adicionarMetragem('bobina1')">Adicionar Bobina 1</button>
            </div>
            <div class="input-group">
                <input type="number" id="metragemBobina2" placeholder="Metragem Bobina 2" />
                <button onclick="adicionarMetragem('bobina2')">Adicionar Bobina 2</button>
            </div>
            <div class="progress-bar">
                <div class="progress" id="barraProgresso"></div>
                <div class="residual" id="barraResiduo"></div>
            </div>
            <button onclick="pausarProcesso()">Pausa</button>
        </div>

        <!-- Seção de Pausa -->
        <div class="pause-section" id="pausa" style="display: none;">
            <h3>Tempo de Pausa</h3>
            <div>Tempo: <span id="tempoPausa">00:00</span></div>
            <input type="text" id="motivoPausa" placeholder="Motivo da Pausa" />
            <button onclick="continuarProcesso()">Continuar</button>
        </div>

        <!-- Tabela de Resultados -->
        <div class="table-container">
            <h3>Histórico de Produção</h3>
            <table id="tabelaResultados">
                <tr>
                    <th>OP</th>
                    <th>Metragem da OP</th>
                    <th>ER</th>
                    <th>Eficiência</th>
                    <th>Tempo da OP</th>
                    <th>Resíduo</th>
                    <th>Tempo de Pausa</th>
                    <th>Motivo</th>
                </tr>
            </table>
            <button onclick="downloadCSV()">Baixar CSV</button>
        </div>
    </div>

    <script>
        let tempoOp, tempoPausa, intervalo, intervaloPausa, progresso = 0, residual = 0;

        function iniciarProcesso() {
            const op = document.getElementById('op').value;
            const metragemOp = parseFloat(document.getElementById('metragemOp').value);
            const er = parseFloat(document.getElementById('er').value);
            const eficiencia = parseFloat(document.getElementById('eficiencia').value) / 100;

            tempoOp = (metragemOp / er) * (1 + eficiencia);
            document.getElementById('tempoOp').textContent = tempoOp.toFixed(2) + ' min';
            document.getElementById('cadastro').style.display = 'none';
            document.getElementById('monitoramento').style.display = 'block';
        }

        function adicionarMetragem(tipo) {
            const metragem = parseFloat(document.getElementById(`metragem${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`).value);
            progresso += tipo === 'bobina1' ? metragem : 0;
            atualizarBarra();
        }

        function atualizarBarra() {
            const barra = document.getElementById('barraProgresso');
            barra.style.width = `${progresso}%`;
        }

        function pausarProcesso() {
            clearInterval(intervalo);
        }

        function downloadCSV() {
            // Implementar função de download.
        }
    </script>
</body>

</html>

